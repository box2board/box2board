<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MLB - Box2Board</title>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <header>
    <a href="/"><img src="../logo.png" alt="Box2Board Logo" style="height: 80px;"></a>
  </header>

  <main>
    <section class="page-intro">
      <h1>MLB Dashboard</h1>
      <p>Daily MLB insights, streaks, and stat-based betting edges ‚Äî all in one place.</p>
    </section>

    <section class="mlb-section">
      <h2>Today‚Äôs Games</h2>
      <p><em>Game odds and matchups will go here. (Automated or manual input)</em></p>
    </section>

    <section class="mlb-section">
      <h2>Hot Streaks</h2>
      <p><em>Teams and players trending up.</em></p>
    </section>

    <section class="mlb-section">
      <h2>Top Hitters</h2>
      <p><em>Based on multi-hit games, OBP trends, etc.</em></p>
    </section>

    <section class="mlb-section">
      <h2>Home Run Watch</h2>
      <p><em>Who‚Äôs due, who‚Äôs locked in.</em></p>
  <section class="top-hr-hitters">
  <h2>Today's Top 20 Home Run Hitters</h2>
  <ul id="hr-list">
    <li>Loading...</li>
  </ul>
</section>

<script>
  async function loadTopHRHitters() {
    try {
      const res = await fetch('/api/hr-hitters');
      const data = await res.json();

      const list = document.getElementById('hr-list');
      list.innerHTML = '';

      data.forEach(player => {
        const li = document.createElement('li');
        li.innerHTML = `<strong>${player.name}</strong> ‚Äî ${player.hr} HR (${player.team})`;
        list.appendChild(li);
      });
    } catch (error) {
      document.getElementById('hr-list').innerHTML = '<li>Error loading hitters.</li>';
      console.error(error);
    }
  }

  loadTopHRHitters();
</script>
    </section>

    <section class="mlb-section">
      <h2>Pitching Matchups</h2>
      <p><em>Today‚Äôs key arms, strikeout props, and matchups to monitor.</em></p>
    </section>

    <section class="mlb-section">
      <h2>Visual Trends (Coming Soon)</h2>
      <p><em>Custom Box2Board visuals and prop heat maps coming soon.</em></p>
    </section>
  <h2 class="page-title">üèÜ 2025 MLB Home Run Leaders</h2>
<div id="hr-leaders">Loading...</div>

<script>
  const realUrl = encodeURIComponent("https://statsapi.mlb.com/api/v1/stats/leaders?leaderCategories=homeRuns&season=2025&limit=25&sportId=1");
  const proxyUrl = `https://api.allorigins.win/get?url=${realUrl}`;

  fetch(proxyUrl)
    .then(response => response.json())
    .then(data => {
      const parsed = JSON.parse(data.contents); // contents is a string
      const leaders = parsed.stats[0].leaders;
      let html = '<table class="hr-table"><thead><tr><th>#</th><th>Player</th><th>Team</th><th>HR</th></tr></thead><tbody>';
      leaders.forEach((player, index) => {
        html += `
          <tr>
            <td>${index + 1}</td>
            <td>${player.person.fullName}</td>
            <td>${player.team.name}</td>
            <td>${player.value}</td>
          </tr>`;
      });
      html += '</tbody></table>';
      document.getElementById("hr-leaders").innerHTML = html;
    })
    .catch(error => {
      console.error("Fetch error:", error);
      document.getElementById("hr-leaders").innerText = "Could not load data.";
    });
</script>
  </main>

  <footer class="site-footer">
    <div class="footer-left">
      &copy; 2025 Box2Board. All rights reserved.
    </div>
    <div class="footer-right">
      <a href="https://your-substack-link" target="_blank">Newsletter</a> |
      <a href="#">Contact</a> |
      <a href="#">Disclaimer</a>
    </div>
  </footer>
</body>
</html>
